//Initialization in Toloka
//JS:
https://qiusihang.github.io/ticktalkturk/js/jquery.js
https://qiusihang.github.io/ticktalkturk/js/chatbot.js
https://lzhanggithub.github.io/client.js
//CSS:
https://qiusihang.github.io/ticktalkturk/style/client.css


// HTML 

<div id="container">
         <div id="history-container">
            <table id="chat-history"></table>
         </div>
         <div id="message-container"><textarea id="message" name="message" onkeydown="onKeyDown(event)" placeholder="Type your message here" rows="1"></textarea></div>
         <div id="send-button" onclick="click_send()"><img src="https://qiusihang.github.io/ticktalkturk/style/send.png" width="20px" style="vertical-align:middle"/></div>
         <div id="message-cover">Please reply the chatbot by selecting the option(s).</div>
         <div id="submit" style="cursor:pointer" onclick="submit()">
            <div style="font-size:16px;border:0px;background:rgba(0,0,0,0);color:#666666"><b>SUBMIT</b></div>
            <textarea id="chat-answer" name="chat-answer" style="display:none"></textarea>
         </div>
      </div>


//JS

exports.Task = extend(TolokaHandlebarsTask, function (options) {
  TolokaHandlebarsTask.call(this, options);
  console.log(options['task']['input_values']['comment']);
  window.onload = init();
}, {
  onRender: function() {
    // DOM element for task is formed (available via #getDOMElement()) 
  },
  onDestroy: function() {
    // Task is completed. Global resources can be released (if used)
  }

});

function extend(ParentClass, constructorFunction, prototypeHash) {
  constructorFunction = constructorFunction || function () {};
  prototypeHash = prototypeHash || {};
  if (ParentClass) {
    constructorFunction.prototype = Object.create(ParentClass.prototype);
  }
  for (var i in prototypeHash) {
    constructorFunction.prototype[i] = prototypeHash[i];
  }
  return constructorFunction;
}

window.onload = init(); //Initialize the survey
